import tkinter as tk

def create_label_in_rectangle(canvas, entries, rectangles, x_start=50, y_start=20, width=450, height=140, y_padding=20):
    """
    Создает лейбл внутри прямоугольника на Canvas.
    :param canvas: Canvas, на котором будут рисоваться прямоугольники и лейблы.
    :param entries: Список полей Entry для ввода данных (job_title, name_second_name, phone_number, job_place).
    :param rectangles: Список для хранения координат прямоугольников.
    :param x_start: Начальная координата X первого прямоугольника.
    :param y_start: Начальная координата Y первого прямоугольника.
    :param width: Ширина прямоугольника.
    :param height: Высота прямоугольника.
    :param y_padding: Отступ по вертикали между прямоугольниками.
    """
    # Получаем текст из полей ввода
    job_title = entries[0].get()
    name_second_name = entries[1].get()
    phone_number = entries[2].get()
    job_place = entries[3].get()

    # Проверяем, что все поля заполнены
    if not (job_title and name_second_name and phone_number and job_place):
        return

    # Формируем текст для лейбла
    label_text = f"{job_title}\n{name_second_name}\n{phone_number}\n\n{job_place}"

    # Создаем лейбл
    label = tk.Label(
        text=label_text,
        bg='green',
        font=('Cosmic Sans MC', 12),
        justify=tk.LEFT
    )

    # Рассчитываем координаты нового прямоугольника
    if not rectangles:
        x1, y1 = x_start, y_start
    else:
        last_rect = rectangles[-1]
        x1, y1 = last_rect[0], last_rect[3] + y_padding

    x2, y2 = x1 + width, y1 + height

    # Создаем прямоугольник на Canvas
    rectangle = canvas.create_rectangle(x1, y1, x2, y2, fill='green')

    # Размещаем лейбл внутри прямоугольника
    canvas.create_window(x1 + 90, y1 + (y2 - y1) // 2, window=label)

    # Сохраняем координаты прямоугольника
    rectangles.append((x1, y1, x2, y2))

# Пример использования
if __name__ == "__main__":
    root = tk.Tk()
    root.title("Label in Rectangle Example")

    # Создаем Canvas
    canvas = tk.Canvas(root, width=600, height=800, bg='white')
    canvas.pack()

    # Список для хранения координат прямоугольников
    rectangles = []

    # Создаем поля ввода
    entry_job_title = tk.Entry(root)
    entry_job_title.pack()
    entry_name_second_name = tk.Entry(root)
    entry_name_second_name.pack()
    entry_phone_number = tk.Entry(root)
    entry_phone_number.pack()
    entry_job_place = tk.Entry(root)
    entry_job_place.pack()

    # Список полей ввода
    entries = [entry_job_title, entry_name_second_name, entry_phone_number, entry_job_place]

    # Функция для создания нового лейбла
    def add_label():
        create_label_in_rectangle(canvas, entries, rectangles)

    # Кнопка для добавления лейбла
    btn_add = tk.Button(root, text="Add Label", command=add_label)
    btn_add.pack()

    root.mainloop()
